<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Bottleship Web Client</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/jquery.terminal/0.11.23/css/jquery.terminal.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/css/bootstrap.min.css" integrity="sha384-AysaV+vQoT3kOAXZkl02PThvDr8HYKPZhNT5h/CXfBThSRXQ6jW5DO2ekP5ViFdi" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.terminal/0.11.23/js/jquery.terminal.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.3.7/js/tether.min.js" integrity="sha384-XTs3FgkjiBgo8qjEjBk0tGmf3wPrWtA6coPfQDfFEY8AnYJwjalXCiosYRBIBZX8" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/js/bootstrap.min.js" integrity="sha384-BLiI7JTZm+JWlgKa0M0kGRpJbF2J8q+qreVrKBC47e3K6BW78kGLrCkeRX6I9RoK" crossorigin="anonymous"></script>
    <script>
        const url = "ws://localhost:8000";
        let socket = new WebSocket(url);
        let printToTerminal = function(msg) { };
        const send = function(msg) {
            socket.send(msg);
        };
        socket.onmessage = function(event) {
            printToTerminal(`${event.origin}: ${event.data}`);
        };
        jQuery(function($, undefined) {
            $('#terminal').terminal(function(command, term) {
                if (command !== '') {
                    send(command)
                }
                printToTerminal = function(x) {
                    term.echo(x);
                };
            }, {
                greetings: 'Bottleship WebClient',
                name: 'bottleship_terminal',
                prompt: '# '
            });
            /*TODO: Fix this.
            const urlText = $( "#urltext" );
            urlText.value = url;
            urlText.change(function() {
                socket = new WebSocket(url);
            });
            */
        });
    </script>
</head>
<body>
<div class="container">
    <div class="jumbotron">
        <h1 class="display-3">Bottleship Web Client</h1>
        <p class="lead">Use this web client to explore the Bottleship API.</p>
        <p><a class="btn btn-lg btn-success" href="https://github.com/jaarky/bottleship" role="button">Github</a></p>
    </div>
    <!--TODO: Fix this
    <div class="row">
        <div class="col-sm-4"></div>
        <input id="urltext" type="text" class="col-sm-4 form-control" value="ws://localhost:8000">
        <div class="col-sm-4"></div>
    </div>
    -->
    <div class="row">
        <div class="col-sm-1"></div>
        <div id="terminal" class="col-sm-10"></div>
        <div class="col-sm-1"></div>
    </div>
</div>
</body>
</html>
