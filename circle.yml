machine:
  services:
    - docker

dependencies:
  override:
    - docker info

compile:
  override:
    - docker build --rm=false -t jaarky/bottleship:latest .
    - id=$(docker create jaarky/bottleship:latest)
    - docker cp $id:/bottleship/bin - > $CIRCLE_ARTIFACTS
    - docker rm -v $id

test:
  override:
    - ./bin/tst
