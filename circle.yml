machine:
  services:
    - docker

dependencies:
  override:
    - docker info

compile:
  override:
    - docker build --rm=false -t jaarky/bottleship:latest .
    - id=$(docker create jaarky/bottleship:latest)
    - docker cp $id:/bottleship/bin - > bin.tar
    - docker rm -v $id
    - tar xvf bin.tar

test:
  override:
    - ./bin/tst
